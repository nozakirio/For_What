<%= render 'users/profile', user: @post.user %>

<p><%= @post.book.title %></p>
<p><%= @post.book.author %></p>
<p><%= image_tag(@post.book.book_image_id) %></p>
<p><%= @post.book.publication_date %></p>

<% if @post.star == nil %>
  <h1>読みたい本詳細</h1>
  <h1>目的・背景</h1>
  <p><%= @post.reason %></p>
<% else %>
  <h1>読んだ本詳細</h1>
  <h1>目的・背景</h1>
  <p><%= @post.reason %></p>
  <div data-turbolinks="false">
  <div id="star" data-score="<%= @post.star %>"></div>
  </div>
  <p>コメント<%= @post.comment %></p>
<% end %>

<% if @post.star != nil && @post.favorited_by?(current_user) %>
  <%= link_to post_favorites_path(@post), method: :delete do %>
    <i class="fa fa-heart" aria-hidden="true" style="color: red;"></i>
    <%= @post.favorites.count %> いいね
  <% end %>
<% else %>
  <%= link_to post_favorites_path(@post), method: :post do %>
    <i class="fa fa-heart-o" aria-hidden="true"></i>
    <%= @post.favorites.count %> いいね
  <% end %>
<% end %>

<% if @post.user == current_user && @post.star != nil %>
  <%= link_to "読んだ本から削除", post_path(@post), method: :delete %>
<% elsif @post.user == current_user && @post.star == nil %>
  <%= link_to "読んだ本に登録", edit_post_path(@post) %>
  <%= link_to "読みたい本から削除", post_path(@post), method: :delete %>
<% elsif @post.user != current_user && AdminBook.where(user_id: current_user.id,book_id: @post.book.id,have_read: true).present? %>
  読んだ本に登録済み
<% else @post.user != current_user && @post.favorited_by?(current_user) %>
  
  <%= link_to "読みたい本に登録", new_post_path(@post.book) %>
<% end %>